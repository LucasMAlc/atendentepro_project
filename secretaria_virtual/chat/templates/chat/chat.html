{% extends 'chat/base.html' %}
{% load static %}

{% block title %}Chat - Secretaria Virtual{% endblock %}

{% block extra_css %}
<style>
    body {
        overflow: hidden;
    }
    main {
        height: calc(100vh - 70px - 80px); /* navbar + footer */
    }
</style>
{% endblock %}

{% block content %}
<div class="chat-container">
    <div class="chat-sidebar">
        <div class="chat-info">
            <h3>Secretaria Virtual</h3>
            <p>Como posso ajud√°-lo hoje?</p>
        </div>
        <div class="chat-tips">
            <h4>üí° Posso ajudar com:</h4>
            <ul>
                <li>Matr√≠culas</li>
                <li>Trancamentos</li>
                <li>Documentos</li>
                <li>Calend√°rio escolar</li>
                <li>Reclama√ß√µes e sugest√µes</li>
            </ul>
        </div>
        <button id="clearBtn" class="btn-secondary">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
            </svg>
            Nova Conversa
        </button>
    </div>

    <div class="chat-main">
        <div class="chat-header">
            <div class="chat-header-info">
                <div class="avatar">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <circle cx="16" cy="16" r="16" fill="#1e40af"/>
                        <path d="M16 8C13.79 8 12 9.79 12 12C12 14.21 13.79 16 16 16C18.21 16 20 14.21 20 12C20 9.79 18.21 8 16 8ZM16 18C12.67 18 6 19.67 6 23V24H26V23C26 19.67 19.33 18 16 18Z" fill="white"/>
                    </svg>
                </div>
                <div>
                    <h3>Assistente Virtual</h3>
                    <span class="status">‚óè Online</span>
                </div>
            </div>
        </div>

        <div id="chatMessages" class="chat-messages">
            <div class="message bot-message">
                <div class="message-avatar">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <circle cx="12" cy="12" r="12" fill="#1e40af"/>
                        <path d="M12 6C10.34 6 9 7.34 9 9C9 10.66 10.34 12 12 12C13.66 12 15 10.66 15 9C15 7.34 13.66 6 12 6ZM12 13.5C9.5 13.5 4.5 14.75 4.5 17.25V18H19.5V17.25C19.5 14.75 14.5 13.5 12 13.5Z" fill="white"/>
                    </svg>
                </div>
                <div class="message-content">
                    <p>Ol√°! Sou a assistente virtual da Secretaria Escolar. üòä</p>
                    <p>Posso ajud√°-lo com matr√≠culas, documentos, calend√°rio escolar e muito mais. Como posso ajud√°-lo hoje?</p>
                    <span class="message-time">Agora</span>
                </div>
            </div>
        </div>

        <div class="chat-input-container">
            <div id="typingIndicator" class="typing-indicator" style="display: none;">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <form id="chatForm" class="chat-input">
                <input 
                    type="text" 
                    id="messageInput" 
                    placeholder="Digite sua mensagem..." 
                    autocomplete="off"
                >
                <button type="submit" id="sendBtn">
                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"/>
                    </svg>
                </button>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'chat/js/chat.js' %}"></script>
{% endblock %}